<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Metagenomics Pipeline</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="megan6-pipeline">MEGAN6 pipeline</h1>
<p>Hello there, here we are at the 4th part of the pipeline, setting up the <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1004957">MEGAN6 Community Edition</a><sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup> pipeline to process the data coming from the <a href="https://uni-tuebingen.de/fakultaeten/mathematisch-naturwissenschaftliche-fakultaet/fachbereiche/informatik/lehrstuehle/algorithms-in-bioinformatics/software/diamond/">DIAMOND</a><sup class="footnote-ref"><a href="#fn2" id="fnref2">2</a></sup> reads aligner.</p>
<ol>
<li>HISAT2</li>
<li>Samtools</li>
<li>DIAMOND</li>
<li><strong>MEGAN6</strong></li>
<li>Plots</li>
</ol>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-z40OGVQsaZazeFfJ" width="100%" style="max-width: 921.09375px;" viewBox="0 0 921.09375 191"><g transform="translate(-12, -12)"><g class="output"><g class="clusters"><g class="cluster" id="subGraph0" transform="translate(624.2734375,78)" style="opacity: 1;"><rect width="391.765625" height="116" x="-195.8828125" y="-58"></rect><g class="label"><g transform="translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignObject></g></g><text x="0" y="-44" fill="black" stroke="none" id="mermaid-svg-z40OGVQsaZazeFfJText" style="text-anchor: middle;">MEGAN6</text></g></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M94.734375,128.62470249279718L119.734375,117L144.734375,117" marker-end="url(#arrowhead184)" style="fill:none"></path><defs><marker id="arrowhead184" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M228.859375,117L253.859375,117L278.859375,117" marker-end="url(#arrowhead185)" style="fill:none"></path><defs><marker id="arrowhead185" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M372.7175480769231,94L403.390625,78L428.390625,78L453.390625,78" marker-end="url(#arrowhead186)" style="fill:none"></path><defs><marker id="arrowhead186" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M372.7175480769231,140L403.390625,156L428.390625,156L514.796875,156L601.203125,156L710.6796875,156L820.15625,156L845.15625,156L870.15625,156" marker-end="url(#arrowhead187)" style="fill:none"></path><defs><marker id="arrowhead187" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M576.203125,78L601.203125,78L626.203125,78" marker-end="url(#arrowhead188)" style="fill:none"></path><defs><marker id="arrowhead188" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M86.64158163265306,169L119.734375,195L186.796875,195L253.859375,195L328.625,195L403.390625,195L428.390625,195L514.796875,195L601.203125,195L710.6796875,195L820.15625,195L845.15625,195L870.15625,176.41751042287075" marker-end="url(#arrowhead189)" style="fill:none"></path><defs><marker id="arrowhead189" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M795.15625,78L820.15625,78L845.15625,78L882.1534455128206,133" marker-end="url(#arrowhead190)" style="fill:none"></path><defs><marker id="arrowhead190" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="E" transform="translate(514.796875,78)" style="opacity: 1;"><rect rx="0" ry="0" x="-61.40625" y="-23" width="122.8125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-51.40625,-13)"><foreignObject width="102.8125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">daa-meganizer</div></foreignObject></g></g></g><g class="node" id="F" transform="translate(710.6796875,78)" style="opacity: 1;"><rect rx="0" ry="0" x="-84.4765625" y="-23" width="168.953125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-74.4765625,-13)"><foreignObject width="148.953125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">compute-comparison</div></foreignObject></g></g></g><g class="node" id="A" transform="translate(57.3671875,146)" style="opacity: 1;"><rect rx="0" ry="0" x="-37.3671875" y="-23" width="74.734375" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-27.3671875,-13)"><foreignObject width="54.734375" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">HISAT2</div></foreignObject></g></g></g><g class="node" id="B" transform="translate(186.796875,117)" style="opacity: 1;"><rect rx="0" ry="0" x="-42.0625" y="-23" width="84.125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-32.0625,-13)"><foreignObject width="64.125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Samtools</div></foreignObject></g></g></g><g class="node" id="C" transform="translate(328.625,117)" style="opacity: 1;"><rect rx="0" ry="0" x="-49.765625" y="-23" width="99.53125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-39.765625,-13)"><foreignObject width="79.53125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">DIAMOND</div></foreignObject></g></g></g><g class="node" id="G" transform="translate(897.625,156)" style="opacity: 1;"><rect rx="0" ry="0" x="-27.46875" y="-23" width="54.9375" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-17.46875,-13)"><foreignObject width="34.9375" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Plots</div></foreignObject></g></g></g></g></g></g></svg></div>
<h2 id="requirements">Requirements</h2>
<p>MEGAN6 Community Edition 6.16 or greater <a href="https://software-ab.informatik.uni-tuebingen.de/download/megan6/welcome.html">download</a><br>
eggNOG, InterPro2GO and SEED file maps <a href="https://software-ab.informatik.uni-tuebingen.de/download/megan6/welcome.html">download</a><br>
Java runtime environment version 11 or greater <a href="https://www.oracle.com/java/technologies/javase/jdk11-archive-downloads.html">download</a></p>
<h2 id="pipeline">Pipeline</h2>
<p>The MEGAN6 pipeline we set up is executed using command-line and has two parts:</p>
<ol>
<li><strong>Meganize</strong> all <em>.daa</em> files, using the <em>daa-meganizer</em> tool provided by the MEGAN6, so they can be ready for the second part of the pipeline.</li>
<li><strong>Compute</strong> the comparisons between all “meganized” files using the <em>compute-comparison</em> tool also provided by the MEGAN6.</li>
</ol>
<blockquote>
<p>Note: These tools are inside the folder tools of the MEGAN6 installation.</p>
</blockquote>
<h2 id="explaining-the-pipeline">Explaining the pipeline</h2>
<p>Firstly, the command-line is used to improve the throughput of the pipeline, in this way we can use the supercomputers with multiple-cores available for our research. The first part of the MEGAN6 pipeline, prepares the samples as .daa files in a way they can be read by the <em>compute-comparison</em> tool. The second part of the pipeline, compute all the samples and generates this computation containing all the maps to the databases provided (eggNOG, InterPro2GO and SEED), finally this file, can be analysed inside the MEGAN6 GUI.</p>
<h1 id="plotting">Plotting</h1>
<p>The 5th part of the pipeline is designed to elaborate plots to help evaluate all the data processed.</p>
<ol>
<li>HISAT2</li>
<li>Samtools</li>
<li>DIAMOND</li>
<li>MEGAN6</li>
<li><strong>Plots</strong></li>
</ol>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-1cpbl7rQ3mKfsEYJ" width="100%" style="max-width: 831.171875px;" viewBox="0 0 831.171875 228"><g transform="translate(-12, -12)"><g class="output"><g class="clusters"><g class="cluster" id="subGraph0" transform="translate(700.671875,126)" style="opacity: 1;"><rect width="269" height="212" x="-134.5" y="-106"></rect><g class="label"><g transform="translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"></div></foreignObject></g></g><text x="0" y="-92" fill="black" stroke="none" id="mermaid-svg-1cpbl7rQ3mKfsEYJText" style="text-anchor: middle;">Plots</text></g></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M94.734375,126L119.734375,126L144.734375,126" marker-end="url(#arrowhead237)" style="fill:none"></path><defs><marker id="arrowhead237" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M228.859375,126L253.859375,126L278.859375,126" marker-end="url(#arrowhead238)" style="fill:none"></path><defs><marker id="arrowhead238" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M378.390625,126L403.390625,126L428.390625,126" marker-end="url(#arrowhead239)" style="fill:none"></path><defs><marker id="arrowhead239" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M516.171875,126L541.171875,126L566.171875,126L591.171875,126" marker-end="url(#arrowhead240)" style="fill:none"></path><defs><marker id="arrowhead240" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M621.203125,115.18832766904957L672.8515625,78L724.5,78" marker-end="url(#arrowhead241)" style="fill:none"></path><defs><marker id="arrowhead241" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M621.203125,136.81167233095042L672.8515625,174L725.984375,174" marker-end="url(#arrowhead242)" style="fill:none"></path><defs><marker id="arrowhead242" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(672.8515625,78)" style="opacity: 1;"><g transform="translate(-26.6484375,-13)" class="label"><foreignObject width="53.296875" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">ggplot2</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(672.8515625,174)" style="opacity: 1;"><g transform="translate(-26.6484375,-13)" class="label"><foreignObject width="53.296875" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel">ggplot2</span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="H" transform="translate(606.1875,126)" style="opacity: 1;"><rect rx="0" ry="0" x="-15.015625" y="-23" width="30.03125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-5.015625,-13)"><foreignObject width="10.03125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">R</div></foreignObject></g></g></g><g class="node" id="I" transform="translate(767.3359375,78)" style="opacity: 1;"><rect rx="0" ry="0" x="-42.8359375" y="-23" width="85.671875" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-32.8359375,-13)"><foreignObject width="65.671875" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">box-plots</div></foreignObject></g></g></g><g class="node" id="J" transform="translate(767.3359375,174)" style="opacity: 1;"><rect rx="0" ry="0" x="-41.3515625" y="-23" width="82.703125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-31.3515625,-13)"><foreignObject width="62.703125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">bar-plots</div></foreignObject></g></g></g><g class="node" id="A" transform="translate(57.3671875,126)" style="opacity: 1;"><rect rx="0" ry="0" x="-37.3671875" y="-23" width="74.734375" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-27.3671875,-13)"><foreignObject width="54.734375" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">HISAT2</div></foreignObject></g></g></g><g class="node" id="B" transform="translate(186.796875,126)" style="opacity: 1;"><rect rx="0" ry="0" x="-42.0625" y="-23" width="84.125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-32.0625,-13)"><foreignObject width="64.125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Samtools</div></foreignObject></g></g></g><g class="node" id="C" transform="translate(328.625,126)" style="opacity: 1;"><rect rx="0" ry="0" x="-49.765625" y="-23" width="99.53125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-39.765625,-13)"><foreignObject width="79.53125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">DIAMOND</div></foreignObject></g></g></g><g class="node" id="D" transform="translate(472.28125,126)" style="opacity: 1;"><rect rx="0" ry="0" x="-43.890625" y="-23" width="87.78125" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-33.890625,-13)"><foreignObject width="67.78125" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">MEGAN6</div></foreignObject></g></g></g></g></g></g></svg></div>
<blockquote>
<p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p>
</blockquote>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>HUSON, D. H. et al. MEGAN Community Edition - Interactive Exploration and Analysis of Large-Scale Microbiome Sequencing Data. <strong>PLOS Computational Biology</strong>, v. 12, n. 6, p. e1004957, 21 jun. 2016. <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>BUCHFINK, B.; XIE, C.; HUSON, D. Fast and sensitive protein alignment using DIAMOND. <strong>Nature Methods</strong>, v. 12, n. 1, p. 59, 60 (2015).** <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
</div>
</body>

</html>
